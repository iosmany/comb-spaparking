import{b as H,d as Y}from"./chunk-J435YHLD.js";import{a as q,b as z,c as G,d as J,e as K,f as Q,g as U}from"./chunk-3IK6JMNO.js";import{Aa as u,Ga as s,Ia as t,Ja as i,K as M,Ka as F,La as O,Ma as c,Na as y,Oa as n,P as N,Pa as d,Q as A,Qa as P,Ra as I,Sa as T,Ta as w,Va as j,W as R,X as L,ib as W,jb as $,k as S,kb as B,na as o,o as C,oa as E,ob as V,v as k,va as g}from"./chunk-L26F2MYK.js";var f=class r{constructor(a){this.http=a}getParkingPermits(a=0,e=10,l=null,m=null){let p=a*e,v=l?`/api/v1/parkingpermits?skip=${p}&length=${e}&bylicenseplate=${l}`:`/api/v1/parkingpermits?skip=${p}&length=${e}`;return v=m?`${v}&expired=${m}`:v,this.http.get(v).pipe(C(_=>_.data),k(_=>(console.error("Error fetching parking Permit",_),[])))}getParkingPermitById(a){return this.http.get(`/api/v1/parkingpermits/${a}`).pipe(C(e=>e.data),k(e=>(console.error("Error fetching parking Permit",e),S(null))))}deactivateParkingPermit(a){return this.http.put(`/api/v1/parkingpermits/${a}/deactivate`,{}).pipe(k(e=>(console.error("Error deactivating parking Permit",e),S(null))))}static \u0275fac=function(e){return new(e||r)(N(V))};static \u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"})};var ee=r=>["detail",r];function te(r,a){if(r&1&&(t(0,"tr")(1,"td"),n(2),i(),t(3,"td"),n(4),i(),t(5,"td"),n(6),i(),t(7,"td"),n(8),i(),t(9,"td")(10,"a",17),n(11,"Detail"),i()()()),r&2){let e=a.$implicit;o(2),P(" ",e.parkingAreaName," "),o(2),P(" ",e.effectiveDate," "),o(2),P(" ",e.expirationDate," "),o(2),P(" ",e.licensePlate," "),o(2),s("routerLink",j(5,ee,e.id))}}var b=class r{title="Parking Permits";parkingService=A(f);page=0;length=8;totalItems=0;data=[];byLicensePlate="";selectedExpiredStatus=!1;noMoreResults=!1;ngOnInit(){this.filter()}filter(){return this.parkingService.getParkingPermits(this.page,this.length,this.byLicensePlate,this.selectedExpiredStatus).subscribe(a=>{this.data=a,this.noMoreResults=a.length<this.length})}onLicensePlateChange(){this.filter()}onExpiredStatusChange(){this.filter()}onNext(){this.noMoreResults||(this.page++,this.filter())}onPrevious(){this.page>0&&this.page--,this.filter()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=g({type:r,selectors:[["app-parkingpermitteable"]],decls:38,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[1,"row"],[1,"col-2"],["type","text","placeholder","By License Plate",1,"form-control","form-control-sm",3,"ngModelChange","keyup","ngModel"],[1,"form-control","form-control-sm",3,"ngModelChange","change","ngModel"],["value",""],["value","false"],["value","true"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"card-footer"],[1,"btn-group","d-flex"],["type","button",1,"btn","btn-default",3,"click"],[1,"btn","btn-secondary","btn-sm",3,"routerLink"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"h5",2),n(3),i()(),t(4,"div",3)(5,"div",4)(6,"div",5)(7,"input",6),w("ngModelChange",function(p){return T(l.byLicensePlate,p)||(l.byLicensePlate=p),p}),c("keyup",function(){return l.onLicensePlateChange()}),i()(),t(8,"div",5)(9,"select",7),w("ngModelChange",function(p){return T(l.selectedExpiredStatus,p)||(l.selectedExpiredStatus=p),p}),c("change",function(){return l.onExpiredStatusChange()}),t(10,"option",8),n(11,"Showing All Status"),i(),t(12,"option",9),n(13,"Active Permits"),i(),t(14,"option",10),n(15,"Expired Permits"),i()()()()(),t(16,"div",11)(17,"table",12)(18,"thead")(19,"tr")(20,"th"),n(21,"Parking Area Name"),i(),t(22,"th"),n(23,"effective Date"),i(),t(24,"th"),n(25,"Expiration Date"),i(),t(26,"th"),n(27,"License Plate"),i()()(),t(28,"tbody"),u(29,te,12,7,"tr",13),i()()(),t(30,"div",14)(31,"div",4)(32,"div",5)(33,"div",15)(34,"button",16),c("click",function(){return l.onPrevious()}),n(35,"Previous"),i(),t(36,"button",16),c("click",function(){return l.onNext()}),n(37,"Next"),i()()()()()()),e&2&&(o(3),d(l.title),o(4),I("ngModel",l.byLicensePlate),o(2),I("ngModel",l.selectedExpiredStatus),o(20),s("ngForOf",l.data))},dependencies:[U,K,Q,q,J,z,G,B,W,Y],encapsulation:2})};var h=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=g({type:r,selectors:[["app-parkingpermisview"]],decls:1,vars:0,template:function(e,l){e&1&&F(0,"app-parkingpermitteable")},dependencies:[b],encapsulation:2})};function ie(r,a){r&1&&(t(0,"div",11),n(1,"Yes"),i())}function ne(r,a){r&1&&(t(0,"div",11),n(1,"No"),i())}function re(r,a){r&1&&(t(0,"span",6),n(1,"Inactive"),i())}function ae(r,a){if(r&1){let e=O();t(0,"div",7)(1,"button",12),c("click",function(){R(e);let m=y(2);return L(m.deactivate())}),n(2,"Deactivate"),i()()}}function oe(r,a){r&1&&(t(0,"div",7)(1,"div",11),n(2,"Yes"),i()())}function le(r,a){if(r&1&&(t(0,"ul",4)(1,"li",5)(2,"span",6),n(3,"Parking Area"),i(),t(4,"div",7),n(5),i()(),t(6,"li",5)(7,"span",6),n(8,"Effective Date"),i(),t(9,"div",7),n(10),i()(),t(11,"li",5)(12,"span",6),n(13,"Expiration Date:"),i(),t(14,"div",7),n(15),i()(),t(16,"li",5)(17,"span",6),n(18,"Expired:"),i(),t(19,"div",7),u(20,ie,2,0,"div",8)(21,ne,2,0,"div",8),i()(),t(22,"li",5)(23,"span",6),n(24,"License Plate:"),i(),t(25,"div",7),n(26),i()(),t(27,"li",5)(28,"span",6),n(29,"Date Created:"),i(),t(30,"div",7),n(31),i()(),t(32,"li",5),u(33,re,2,0,"span",9)(34,ae,3,0,"div",10)(35,oe,3,0,"div",10),i()()),r&2){let e=y();o(5),d(e.model.parkingAreaName),o(5),d(e.model.effectiveDate),o(5),d(e.model.expirationDate),o(5),s("ngIf",e.expired),o(),s("ngIf",!e.expired),o(5),d(e.model.licensePlate),o(5),d(e.model.dateCreated),o(2),s("ngIf",e.model.inactive),o(),s("ngIf",e.expired&&!e.model.inactive),o(),s("ngIf",e.model.inactive)}}var x=class r{constructor(a,e){this.route=a;this.service=e}model=null;expired=!1;ngOnInit(){let a=this.route.snapshot.params.id;console.log(this.route.snapshot.params),this.service.getParkingPermitById(a).subscribe(e=>{e&&(this.model=e,this.expired=new Date(this.model.expirationDate)<new Date)})}deactivate(){let a=confirm("Are you sure you want to deactivate this permit?");this.model&&a&&this.service.deactivateParkingPermit(this.model.id).subscribe(e=>{this.model.inactive=!1})}static \u0275fac=function(e){return new(e||r)(E(H),E(f))};static \u0275cmp=g({type:r,selectors:[["app-parkingpermitdetail"]],decls:5,vars:1,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],["class","list-group list-group-flush border-top",4,"ngIf"],[1,"list-group","list-group-flush","border-top"],[1,"list-group-item","d-flex"],[1,"fw-semibold"],[1,"ms-auto"],["class","badge bg-info",4,"ngIf"],["class","fw-semibold",4,"ngIf"],["class","ms-auto",4,"ngIf"],[1,"badge","bg-info"],[1,"btn","btn-sm","btn-secondary",3,"click"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"h5",2),n(3,"Parking Permit Detail"),i()(),u(4,le,36,10,"ul",3),i()),e&2&&(o(4),s("ngIf",l.model))},dependencies:[$],encapsulation:2})};var Ae=[{path:"",component:h},{path:"detail/:id",component:x}];export{Ae as routes};
